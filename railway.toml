[build]
# DRAAD185 ROOT CAUSE FIX: Explicit build command to force Node.js path
# Railway's auto-detection was confused by both Node.js and Python artifacts
# Explicit build command ensures npm ci && npm run build is executed
command = "npm ci --prefer-offline --no-audit && npm run build"

[deploy]
# DRAAD185 FIX: Increased timeouts for reliability
# Previous: healthcheckTimeout = 100s was insufficient
# New: 120s allows for slow builds on resource-constrained environments
startCommand = "HOSTNAME=0.0.0.0 PORT=$PORT node .next/standalone/server.js"

# Health check configuration
# Increased from 100s to 120s to accommodate slower startups
healthcheckPath = "/api/health"
healthcheckTimeout = 120

# Restart policy
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 15

# Cache-busting deployment trigger
# DRAAD185-5 ROOT CAUSE FIX: 2025-12-15T18:46:00Z
# Issue: Railway auto-detection selected Python path instead of Node.js
# Solution: Added explicit Dockerfile + updated .railwayignore
# Incremented cache bust: 1734369960
# Expected outcome: Clean rebuild with Node.js detection
