# Python OR-Tools Solver Service\n\n## Overzicht\n\nFastAPI service voor roosteroptimalisatie met Google OR-Tools CP-SAT solver.\n\n## Kenmerken\n\n- **Solver**: Google OR-Tools CP-SAT 9.11\n- **Framework**: FastAPI 0.115\n- **Server**: Uvicorn (ASGI)\n- **CORE 3 Constraints**:\n  1. Max werkdagen per week\n  2. Structureel NBH (Niet Beschikbaar Houden)\n  3. Service bevoegdheid\n\n## API Endpoints\n\n### Health Check\n```\nGET /\nGET /health\n```\n\n### Solve Schedule\n```\nPOST /api/v1/solve-schedule\n```\n\n**Request Body**: Zie `SolveRequest` model in `main.py`\n\n**Response**: Optimale/feasible roosteroplossing met assignments\n\n## Lokaal Draaien\n\n```bash\ncd solver\npip install -r requirements.txt\nuvicorn main:app --reload --port 8000\n```\n\n## Railway Deployment\n\n### Automatisch (via GitHub):\n1. Push naar main branch\n2. Railway detecteert `solver/` directory\n3. Bouwt Python service met Nixpacks\n4. Start met Procfile command\n\n### Handmatig (via Railway CLI):\n```bash\nrailway link [project-id]\nrailway up\n```\n\n## Environment Variables\n\nGeen environment variables vereist voor de solver service zelf.\n\n**Next.js app moet WEL instellen**:\n```\nSOLVER_SERVICE_URL=https://solver-xyz.railway.app\n```\n\n## Performance\n\n- **Timeout**: Configureerbaar (default 30s, max 300s)\n- **Complexity**: O(employees × days × dagdelen × services)\n- **Example**: 13 medewerkers, 35 dagen, 3 dagdelen, 9 diensten = ~12,285 variabelen\n\n## Logging\n\nAlle solver runs worden gelogd in Railway:\n- Constraints toegevoegd\n- Solve time\n- Solution status\n- Assignments gegenereerd\n\n## Troubleshooting\n\n### Service start niet\n- Check Railway logs voor Python errors\n- Verify `requirements.txt` dependencies\n- Ensure port ${PORT} is used\n\n### Timeout errors\n- Verhoog `timeout_seconds` in request\n- Reduceer complexiteit (minder dagen/diensten)\n- Check constraints voor conflicts\n\n### INFEASIBLE solutions\n- Te strikte constraints (NBH + max werkdagen)\n- Onvoldoende bevoegdheden\n- Te veel pre-assignments\n\n## Versie\n\n**1.0.0** - DRAAD101\n- Initieële implementatie\n- CORE 3 constraints\n- FastAPI REST API\n- Railway deployment ready\n