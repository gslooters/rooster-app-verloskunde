# CACHE BUST - DRAAD200: Dockerfile Lock File Fix
# Date: 2025-12-17T00:50:51Z
# Purpose: Force Railway to do full rebuild with npm install
# Previous attempts: 7 failed manual lock file restoration attempts
# This time: Automatic regeneration via Dockerfile

CACHE_BUST_ID=draad200-20251217-npm-install-fix
TIMESTAMP=2025-12-17T00:50:51Z
REASON=Lock file corruption fix - automatic npm install in Docker build
EXPECTED_RESULT=350+ packages installed, lock file regenerated, Railway deployment succeeds

Railway Services Affected:
- rooster-app-verloskunde (Frontend Next.js)
- Build trigger: Automatic (Dockerfile changed)
- Expected build time: 5-10 minutes
- Health check: HEALTHCHECK command validates startup

Success Indicators:
✓ npm install shows 'added 350+ packages'
✓ npm ci shows 'audit not run' (all packages available)
✓ npm run build succeeds
✓ Container starts on port 3000
✓ Health check PASSES
✓ App accessible at Railway URL

Previous Failed Attempts (16-12-2025):
❌ 20:01 - package-lock.json DELETED
❌ 20:01 - CORRUPT lock file created
❌ 20:24 - Manual restore attempt #1
❌ 20:47 - Manual restore attempt #2 (claimed 350 packages, has ~50)
❌ 21:22 - Manual restore attempt #3
❌ 23:09 - Fixed eslint-config-next version
❌ 23:13 - Updated lock file root entry
❌ 23:13 - FASE 5 Complete (still failed)

This Time Different Strategy:
✅ Not: "fix the lock file manually"
✅ Yes: "Make Dockerfile regenerate it automatically"
✅ npm install during Docker build = automatic lock file regeneration
✅ Guaranteed to work because npm generates it algorithmically
